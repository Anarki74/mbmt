{% extends "shared/base.html" %}

{% block content %}

<h1>Overview</h1>

<h2>Schools</h2>
<table id="chaperones" class="table">
    <tr><th>School</th><th>Coach</th><th>Teams</th><th>Chaperones</th></tr>
    {% for map in coaching %}
    {% with map.chaperones as chaperones %}
    {% with map.teams as teams %}
    <tr>
        <td>
            {{ map.school.name|default_if_none:"None selected" }}<br>
            {{ teams|length }} teams <br>
            {{ chaperones|length }} chaperones
        </td>
        <td>
            {{ map.coach.get_full_name }}<br>
            <a href="mailto:{{ map.coach.email }}">{{ map.coach.email }}</a>
        </td>
        <td>
        {% for team in teams %}
            <span class="newline">{{ team.name }}</span>
        {% empty %}
            No teams!
        {% endfor %}
        </td>
        <td>
        {% for chaperone in chaperones %}
            <span class="newline">{{ chaperone.get_full_name }}</span>
        {% empty %}
            No chaperones!
        {% endfor %}
        </td>
    </tr>
    {% endwith %}
    {% endwith %}
    {% endfor %}
</table>

{% endblock %}
